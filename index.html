<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>ğŸ“„è¯»å–TXTæ–‡ä»¶âœ¨</title>
    <link
      rel="icon"
      href="https://raw.githubusercontent.com/mubai16888/mb/main/mb.ico"
      type="image/x-icon"
    />
    <link
      rel="icon"
      href="https://raw.githubusercontent.com/mubai16888/mb/main/mb.png"
      type="image/png"
      sizes="192x192"
    />

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <script>
      // ======================
      // å…¨å±€é…ç½®å‚æ•°
      // ======================
      const CONFIG = {
        // èƒŒæ™¯åª’ä½“é…ç½®
        backgroundMedia: [
          { type: "image", src: "./123.jpg" },
          { type: "video", src: "./scenery.mp4" },
          { type: "video", src: "../åŠç²¾èŠ/bg/BeautyCollection.mp4" },
          { type: "video", src: "../åŠç²¾èŠ/bg/BeautifulGirl.mp4" },
          
        ],
        // ç”¨äºç³»ç»Ÿè‡ªåŠ¨è¯»å–å›¾ç‰‡çš„æ ¼å¼
        supportedImageFormats: [
          "jpg",
          "jpeg",
          "png",
          "gif",
          "webp",
          "bmp",
          "svg",
        ],

        // æ—¶åŒºé…ç½®
        timeZones: [
          { id: "time1", name: "åœŸè€³å…¶/æ²™ç‰¹/åŸƒåŠ", offset: +3 },
          { id: "time2", name: "æ¬§æ´²", offset: +2 },
          { id: "time3", name: "å·´è¥¿", offset: -3 },
        ],

        // æ–‡ä»¶å¤„ç†é…ç½®
        fileProcessing: {
          maxTitleLength: 5, // ç›®å½•ä¸­æ˜¾ç¤ºçš„æ ‡é¢˜æœ€å¤§é•¿åº¦
          linePrefixRemovalRegex: /^[A-Za-z0-9][\W_]{2}/, // è¡Œå‰ç¼€ç§»é™¤æ­£åˆ™
        },

        // H3å¯¹åº”lié«˜äº® é…ç½®å‚æ•°
        config: {
          topThresholdRatio: 0.7, // è®¾ç½®0.7ï¼Œè·ç¦»åº•éƒ¨ï¼ˆ30%ï¼‰
          bottomThresholdRatio: 0.3, // è·ç¦»é¡¶éƒ¨ï¼ˆ30%ï¼‰
          scrollDebounceTime: 100, // é˜²æŠ–æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
          pulseAnimation: "pulseHighlight 0.5s ease-out", // é«˜äº®åŠ¨ç”»
        },

        // UIæ˜¾ç¤º/éšè—é…ç½®
        uiVisibility: {
          fadeOutDelay: 10000, // 10ç§’åå¼€å§‹æ·¡å‡º
          fadeOutDuration: 700, // æ·¡å‡ºåŠ¨ç”»æŒç»­æ—¶é—´
          hideDelay: 1500, // æ·¡å‡ºåéšè—çš„å»¶è¿Ÿ
        },

        // å¤åˆ¶æ–‡æœ¬æ•ˆæœé…ç½®
        copyEffect: {
          highlightDuration: 5000, // é«˜äº®æŒç»­æ—¶é—´(æ¯«ç§’)
          notification: {
            emojis: ["âœ¨", "âœ…", "âš¡", "ğŸŒŸ", "ğŸ‰", "ğŸ”¥", "ğŸ’«", "ğŸš€"],
            showDuration: 3000,
          },
          particles: {
            count: 30,
            minSize: 4,
            maxSize: 12,
            colors: ["#ff00cc", "#3333ff", "#00ffcc", "#ffcc00", "#ffffff"],
            maxDistance: 80,
          },
        },

        // é¼ æ ‡è½¨è¿¹æ•ˆæœé…ç½®
        mouseRipple: {
          maxRipples: 20, // æœ€å¤§æ³¢çº¹æ•°é‡
          baseSize: 80, // åŸºç¡€å¤§å°
          speedFactor: 3, // é€Ÿåº¦ç³»æ•°
          maxSize: 400, // æœ€å¤§å°ºå¯¸
          animationDuration: 1200, // åŠ¨ç”»æŒç»­æ—¶é—´
        },

        // å¿ƒè·³åŠ¨ç”»é…ç½®
        heartAnimation: {
          count: 3, // æ¯æ¬¡ç‚¹å‡»äº§ç”Ÿçš„å¿ƒå½¢æ•°é‡
          maxOffsetX: 50, // Xè½´æœ€å¤§åç§»é‡
          maxOffsetY: 30, // Yè½´æœ€å¤§åç§»é‡
          duration: 3000, // åŠ¨ç”»æŒç»­æ—¶é—´
        },
      };

      // ======================
      // å…¨å±€å˜é‡
      // ======================
      const pTags = [];
      let highlightedTag = null;
      let highlightedLi = null;
      let rippleCount = 0;
      let lastX = 0,
        lastY = 0;
      let lastTime = 0;
      let notificationTimeout;
      let isAnimating = false;
      let lastH6Tag = null;
      let isLoadingLastFile = false;
      let isFirstLoad = true;

      // ======================
      // æ–‡ä»¶è®°å¿†åŠŸèƒ½
      // ======================
      const STORAGE_KEY = "lastOpenedFile";
      const FIRST_LOAD_KEY = "isFirstLoad";
      const SESSION_KEY = "isSessionActive";

      // æ£€æŸ¥æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡åŠ è½½æˆ–æ–°ä¼šè¯
      function checkFirstLoad() {
        const sessionFlag = sessionStorage.getItem(SESSION_KEY);
        if (sessionFlag === null) {
          // æ–°ä¼šè¯å¼€å§‹
          sessionStorage.setItem(SESSION_KEY, "true");
          const firstLoadFlag = localStorage.getItem(FIRST_LOAD_KEY);
          if (firstLoadFlag === null) {
            // ç¬¬ä¸€æ¬¡åŠ è½½ï¼Œè®¾ç½®æ ‡å¿—
            localStorage.setItem(FIRST_LOAD_KEY, "true");
            isFirstLoad = true;
          } else {
            isFirstLoad = false;
          }
        } else {
          // å·²æœ‰ä¼šè¯ï¼ˆå¯èƒ½æ˜¯åˆ·æ–°ï¼‰
          isFirstLoad = false;
        }
      }

      // å°è¯•åŠ è½½ä¸Šæ¬¡æ‰“å¼€çš„æ–‡ä»¶
      function loadLastFile() {
        const lastFileData = localStorage.getItem(STORAGE_KEY);
        if (lastFileData && isFirstLoad) {
          try {
            const { fileName, fileContent } = JSON.parse(lastFileData);
            // åˆ›å»ºæ¨¡æ‹Ÿæ–‡ä»¶å¯¹è±¡
            const file = new File([fileContent], fileName, {
              type: "text/plain",
            });
            isLoadingLastFile = true;
            processFile(file, true);
          } catch (e) {
            console.error("Failed to load last file:", e);
          }
        }
      }

      // ä¿å­˜æ–‡ä»¶åˆ°æœ¬åœ°å­˜å‚¨
      function saveFileToStorage(fileName, fileContent) {
        const fileData = {
          fileName: fileName,
          fileContent: fileContent,
        };
        localStorage.setItem(STORAGE_KEY, JSON.stringify(fileData));
        // ä¿å­˜åæ ‡è®°ä¸ºéç¬¬ä¸€æ¬¡åŠ è½½
        localStorage.setItem(FIRST_LOAD_KEY, "false");
        isFirstLoad = false;
      }

      $(document).ready(function () {
        // æ£€æŸ¥æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡åŠ è½½å¹¶å°è¯•åŠ è½½ä¸Šæ¬¡æ‰“å¼€çš„æ–‡ä»¶
        checkFirstLoad();
        setTimeout(() => {
          if (isFirstLoad) {
            isLoadingLastFile = true;
            loadLastFile();
            isLoadingLastFile = false;
          }
        }, 100);

        // ======================
        // æ–‡ä»¶å¤„ç†åŠŸèƒ½
        // ======================
        $("#txtFileInput").on("change", function (event) {
          const file = event.target.files[0];
          if (!file) return;

          // é‡ç½®æ–‡ä»¶è¾“å…¥ï¼Œå…è®¸é‡å¤é€‰æ‹©åŒä¸€ä¸ªæ–‡ä»¶
          event.target.value = "";

          processFile(file);
        });

        /**
         * å¤„ç†æ–‡ä»¶å†…å®¹
         * @param {File} file è¦å¤„ç†çš„æ–‡ä»¶
         * @param {boolean} isFromStorage æ˜¯å¦æ¥è‡ªæœ¬åœ°å­˜å‚¨
         */
        function processFile(file, isFromStorage = false) {
          const reader = new FileReader();

          reader.onload = function (event) {
            const content = event.target.result;

            // å¦‚æœä¸æ˜¯ä»å­˜å‚¨åŠ è½½çš„ï¼Œæ‰ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            if (!isFromStorage) {
              saveFileToStorage(file.name, content);
            }

            // æ¸²æŸ“æ–‡ä»¶å†…å®¹
            renderFileContent(file.name, content);
          };

          reader.readAsText(file);
        }

        /**
         * æ¸²æŸ“æ–‡ä»¶å†…å®¹
         * @param {string} fileName æ–‡ä»¶å
         * @param {string} content æ–‡ä»¶å†…å®¹
         */
        function renderFileContent(fileName, content) {
          const outputDiv = $("#output");
          const h3List = $("#h3List");
          const title = $("title");
          $(".menuLeft>div").css("display", "block");

          // æ¸…ç©ºä¹‹å‰çš„å†…å®¹
          outputDiv.empty();
          h3List.empty();
          pTags.length = 0;
          lastH6Tag = null;

          // ä¿®å¤ï¼šç¡®ä¿æ­£ç¡®å¤„ç†ä¸åŒæ“ä½œç³»ç»Ÿçš„æ¢è¡Œç¬¦
          const lines = content.split(/\r?\n/);
          let currentParagraph = null;

          const fileNameWithoutExt = fileName.replace(/\.[^/.]+$/, "");
          title.text(fileNameWithoutExt);
          // é€šçŸ¥çˆ¶é¡µé¢æ›´æ–°æ ‡é¢˜
          parent.postMessage({ type: "updateTitle", filename: fileName }, "*");

          // é€è¡Œå¤„ç†æ–‡ä»¶å†…å®¹
          lines.forEach((line) => {
            line = line.trim();

            if (line === "") {
              if (currentParagraph) {
                outputDiv.append(currentParagraph);
                currentParagraph = null;
              }
            } else {
              // ç§»é™¤è¡Œå‰ç¼€
              line = line.replace(
                CONFIG.fileProcessing.linePrefixRemovalRegex,
                ""
              );
              line = line.trim();

              if (line) {
                const paragraphs = line.split(/\n+/);

                paragraphs.forEach((paragraphText, index) => {
                  let element;

                  // æ ¹æ®å‰ç¼€åˆ›å»ºä¸åŒçš„HTMLå…ƒç´ 
                  if (paragraphText.startsWith("h3")) {
                    element = $("<h3>").text(paragraphText.slice(3).trim());
                    outputDiv.append(element);

                    // åˆ›å»ºç›®å½•é¡¹
                    const li = $("<li>").text(
                      element
                        .text()
                        .slice(0, CONFIG.fileProcessing.maxTitleLength)
                    );
                    li.on("click", () => scrollToH3(element[0]));
                    li.on("click", highlightLi);
                    h3List.append(li);
                  } else if (paragraphText.startsWith("h4")) {
                    element = $("<h4>").text(paragraphText.slice(3).trim());
                    outputDiv.append(element);
                    pTags.push(element[0]);
                  } else if (paragraphText.startsWith("h5")) {
                    element = $("<h5>").text(paragraphText.slice(3).trim());
                    outputDiv.append(element);
                  } else if (paragraphText.startsWith("h6")) {
                    element = $("<h6>").text(paragraphText.slice(3).trim());
                    outputDiv.append(element);
                    const iTag = $("<i>");
                    pTags.push(iTag[0]);
                    lastH6Tag = element[0];
                  } else if (paragraphText.startsWith("hh")) {
                    const iElement = $("<i>").text(
                      paragraphText.slice(2).trim()
                    );
                    if (lastH6Tag) {
                      $(lastH6Tag).append(iElement);
                    }
                  } else if (paragraphText.startsWith("span")) {
                    if (pTags.length > 0) {
                      const lastPTag = pTags[pTags.length - 1];
                      const span = $("<span>").text(
                        paragraphText.slice(4).trim()
                      );
                      $(lastPTag).append(span);
                    }
                  } else if (paragraphText.startsWith("./")) {
                    const imgPath = paragraphText.slice(2).trim();
                    if (imgPath) {
                      // å°è¯•è‡ªåŠ¨æ£€æµ‹å›¾ç‰‡æ ¼å¼
                      const imgBasePath = imgPath.split(".")[0]; // ç§»é™¤å¯èƒ½å·²æœ‰çš„æ‰©å±•å
                      const imgFormats = CONFIG.supportedImageFormats;

                      // åˆ›å»ºå›¾ç‰‡å…ƒç´ 
                      element = $("<img>").addClass("zoomable-image").css({
                        width: "150px",
                        height: "150px",
                        objectFit: "cover",
                      });

                      // å…ˆæ·»åŠ åˆ°DOMï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥ç›‘å¬é”™è¯¯äº‹ä»¶
                      outputDiv.append(element);

                      // å°è¯•åŠ è½½ä¸åŒæ ¼å¼çš„å›¾ç‰‡
                      let currentFormatIndex = 0;

                      function tryNextFormat() {
                        if (currentFormatIndex < imgFormats.length) {
                          const format = imgFormats[currentFormatIndex++];
                          const src = `${imgBasePath}.${format}`;

                          element
                            .one("error", function () {
                              // å½“å‰æ ¼å¼åŠ è½½å¤±è´¥ï¼Œå°è¯•ä¸‹ä¸€ä¸ª
                              tryNextFormat();
                            })
                            .attr("src", src);
                        } else {
                          // æ‰€æœ‰æ ¼å¼éƒ½å°è¯•è¿‡äº†ï¼Œéƒ½å¤±è´¥äº†
                          element.remove();
                        }
                      }

                      // å¼€å§‹å°è¯•ç¬¬ä¸€ä¸ªæ ¼å¼
                      tryNextFormat();
                    }
                  } else if (paragraphText.startsWith("image")) {
                    const imgSrc = paragraphText.trim();
                    if (imgSrc) {
                      element = $("<img>")
                        .attr("src", imgSrc)
                        .addClass("zoomable-image")
                        .css({
                          width: "150px",
                          height: "150px",
                          objectFit: "cover",
                        });
                      outputDiv.append(element);
                    }
                  } else {
                    if (!currentParagraph) {
                      currentParagraph = $("<div>");
                      outputDiv.append(currentParagraph);
                    }
                    element = $("<p>").text(paragraphText);
                    element.on("click", copyText);
                    pTags.push(element[0]);
                    currentParagraph.append(element);
                  }
                });
              }
            }
          });

          if (currentParagraph) {
            outputDiv.append(currentParagraph);
          }

          // é«˜äº®ç¬¬ä¸€ä¸ªç›®å½•é¡¹
          const firstLi = h3List.find("li").first();
          if (firstLi.length) {
            firstLi.addClass("highlight");
            highlightedLi = firstLi[0];
          }

          // è®¾ç½®æ™ºèƒ½æ»šåŠ¨é«˜äº®
          setTimeout(setupSmartScrollHighlight, 0);

          // åˆå§‹åŒ–å›¾ç‰‡æ”¾å¤§åŠŸèƒ½
          initImageZoom();
        }

        // ======================
        // å›¾ç‰‡æ”¾å¤§åŠŸèƒ½ï¼ˆå·²ä¿®æ”¹ä¸ºæ‹–åŠ¨æŸ¥çœ‹ï¼‰
        // ======================
        // ======================
        // å›¾ç‰‡æ”¾å¤§åŠŸèƒ½ï¼ˆå®Œæ•´å¢å¼ºç‰ˆï¼‰
        // ======================
        function initImageZoom() {
          // å­˜å‚¨æ‰€æœ‰å›¾ç‰‡å…ƒç´ å’Œå½“å‰ç´¢å¼•
          let allImages = [];
          let currentImageIndex = 0;

          // åˆ›å»ºå›¾ç‰‡æŸ¥çœ‹å™¨å®¹å™¨
          const imageViewer = $('<div id="image-viewer"></div>').css({
            position: "fixed",
            top: 0,
            left: 0,
            width: "100%",
            height: "100%",
            backgroundColor: "rgba(0, 0, 0, 0.9)",
            zIndex: 99999,
            display: "none",
            justifyContent: "center",
            alignItems: "center",
            cursor: "zoom-out",
            overflow: "hidden",
          });

          // åˆ›å»ºå›¾ç‰‡å®¹å™¨
          const imageContainer = $('<div id="image-container"></div>').css({
            position: "relative",
            width: "100%",
            height: "100%",
            overflow: "hidden",
            pointerEvents: "none",
          });

          // åˆ›å»ºå…³é—­æŒ‰é’®
          const closeButton = $('<div class="close-button">Ã—</div>').css({
            position: "absolute",
            top: "20px",
            right: "20px",
            color: "white",
            fontSize: "40px",
            cursor: "pointer",
            zIndex: 100000,
          });

          // åˆ›å»ºæ”¾å¤§æŒ‰é’®
          const zoomInButton = $(
            '<div class="zoom-button zoom-in">+</div>'
          ).css({
            position: "absolute",
            bottom: "20px",
            right: "20px",
            backgroundColor: "rgba(0, 0, 0, 0.5)",
            color: "white",
            width: "40px",
            height: "40px",
            borderRadius: "50%",
            display: "flex",
            justifyContent: "center",
            alignItems: "center",
            fontSize: "30px",
            cursor: "pointer",
            zIndex: 100000,
          });

          // åˆ›å»ºç¼©å°æŒ‰é’®
          const zoomOutButton = $(
            '<div class="zoom-button zoom-out">-</div>'
          ).css({
            position: "absolute",
            bottom: "20px",
            right: "80px",
            backgroundColor: "rgba(0, 0, 0, 0.5)",
            color: "white",
            width: "40px",
            height: "40px",
            borderRadius: "50%",
            display: "flex",
            justifyContent: "center",
            alignItems: "center",
            fontSize: "30px",
            cursor: "pointer",
            zIndex: 100000,
          });

          // åˆ›å»ºé‡ç½®æŒ‰é’®
          const resetButton = $('<div class="zoom-button reset">â†»</div>').css({
            position: "absolute",
            bottom: "20px",
            right: "140px",
            backgroundColor: "rgba(0, 0, 0, 0.5)",
            color: "white",
            width: "40px",
            height: "40px",
            borderRadius: "50%",
            display: "flex",
            justifyContent: "center",
            alignItems: "center",
            fontSize: "30px",
            cursor: "pointer",
            zIndex: 100000,
          });

          // åˆ›å»ºå¯¼èˆªæŒ‰é’®
          const prevButton = $('<div class="nav-button prev">â®</div>').css({
            position: "absolute",
            left: "20px",
            top: "50%",
            transform: "translateY(-50%)",
            backgroundColor: "rgba(0, 0, 0, 0.5)",
            color: "white",
            width: "50px",
            height: "50px",
            borderRadius: "50%",
            display: "flex",
            justifyContent: "center",
            alignItems: "center",
            fontSize: "30px",
            cursor: "pointer",
            zIndex: 100000,
          });

          const nextButton = $('<div class="nav-button next">â¯</div>').css({
            position: "absolute",
            right: "20px",
            top: "50%",
            transform: "translateY(-50%)",
            backgroundColor: "rgba(0, 0, 0, 0.5)",
            color: "white",
            width: "50px",
            height: "50px",
            borderRadius: "50%",
            display: "flex",
            justifyContent: "center",
            alignItems: "center",
            fontSize: "30px",
            cursor: "pointer",
            zIndex: 100000,
          });

          // åˆ›å»ºå›¾ç‰‡å…ƒç´ 
          const imageElement = $('<img id="zoomed-image">').css({
            maxWidth: "100%",
            maxHeight: "100%",
            transition: "transform 0.2s ease-out",
            display: "block",
            position: "absolute",
            top: "50%",
            left: "50%",
            transform: "translate(-50%, -50%)",
            cursor: "move",
            userSelect: "none",
            touchAction: "none",
            willChange: "transform",
            pointerEvents: "auto",
          });

          // åˆ›å»ºå›¾ç‰‡è®¡æ•°å™¨
          const counter = $('<div class="image-counter">').css({
            position: "absolute",
            top: "20px",
            left: "20px",
            color: "white",
            fontSize: "18px",
            zIndex: 100000,
            backgroundColor: "rgba(0, 0, 0, 0.5)",
            padding: "5px 10px",
            borderRadius: "10px",
          });

          // ç»„è£…å…ƒç´ 
          imageContainer.append(imageElement);
          imageViewer.append(
            closeButton,
            zoomInButton,
            zoomOutButton,
            resetButton,
            prevButton,
            nextButton,
            counter,
            imageContainer
          );
          $("body").append(imageViewer);

          // æ”¶é›†æ‰€æœ‰å›¾ç‰‡
          allImages = $(".zoomable-image").toArray();

          // ç‚¹å‡»å›¾ç‰‡æ”¾å¤§
          $(".zoomable-image").on("click", function (e) {
            e.stopPropagation();
            currentImageIndex = allImages.indexOf(this);
            openImage(currentImageIndex);
          });

          function openImage(index) {
            if (index < 0 || index >= allImages.length) return;

            currentImageIndex = index;
            const src = $(allImages[index]).attr("src");
            imageElement.attr("src", src);
            imageViewer.css("display", "flex");
            updateCounter();

            // åŠ è½½å›¾ç‰‡åè®¡ç®—é€‚åˆçš„æ˜¾ç¤ºå°ºå¯¸
            imageElement.on("load", function () {
              const img = this;
              const windowWidth = $(window).width() * 0.9;
              const windowHeight = $(window).height() * 0.9;

              // è®¡ç®—é€‚åˆçª—å£çš„å°ºå¯¸
              let displayWidth = img.naturalWidth;
              let displayHeight = img.naturalHeight;

              if (
                img.naturalWidth > windowWidth ||
                img.naturalHeight > windowHeight
              ) {
                const ratio = Math.min(
                  windowWidth / img.naturalWidth,
                  windowHeight / img.naturalHeight
                );
                displayWidth = img.naturalWidth * ratio;
                displayHeight = img.naturalHeight * ratio;
              }

              // è®¾ç½®åˆå§‹æ˜¾ç¤ºå°ºå¯¸å’Œä½ç½®
              $(img).css({
                width: displayWidth + "px",
                height: displayHeight + "px",
                transform: "translate(-50%, -50%) scale(1)",
              });

              // é‡ç½®çŠ¶æ€
              imageElement.data({
                scale: 1,
                offsetX: 0,
                offsetY: 0,
                isDragging: false,
                startX: 0,
                startY: 0,
              });
            });

            // ç¦æ­¢æ»šåŠ¨
            $("body").css("overflow", "hidden");
          }

          function updateCounter() {
            counter.text(`${currentImageIndex + 1}/${allImages.length}`);
          }

          // å…³é—­æŸ¥çœ‹å™¨
          closeButton.on("click", function (e) {
            e.stopPropagation();
            closeImageViewer();
          });

          // ç‚¹å‡»æŸ¥çœ‹å™¨èƒŒæ™¯å…³é—­
          imageViewer.on("click", function (e) {
            // åªæœ‰å½“ç‚¹å‡»çš„æ˜¯æŸ¥çœ‹å™¨èƒŒæ™¯æ—¶æ‰å…³é—­
            if (e.target === this) {
              closeImageViewer();
            }
          });

          function closeImageViewer() {
            imageViewer.hide();
            $("body").css("overflow", "auto");
            imageElement.data("isDragging", false);
          }

          // å¯¼èˆªæŒ‰é’®äº‹ä»¶
          prevButton.on("click", function (e) {
            e.stopPropagation();
            navigate(-1);
          });

          nextButton.on("click", function (e) {
            e.stopPropagation();
            navigate(1);
          });

          function navigate(direction) {
            const newIndex = currentImageIndex + direction;
            if (newIndex >= 0 && newIndex < allImages.length) {
              openImage(newIndex);
            }
          }

          // é”®ç›˜å¯¼èˆª
          $(document).on("keydown", function (e) {
            if (imageViewer.css("display") === "none") return;

            switch (e.key) {
              case "ArrowLeft":
                navigate(-1);
                break;
              case "ArrowRight":
                navigate(1);
                break;
              case "Escape":
                closeImageViewer();
                break;
            }
          });

          // æ”¾å¤§å›¾ç‰‡
          zoomInButton.on("click", function (e) {
            e.stopPropagation();
            zoomImage(1.2);
          });

          // ç¼©å°å›¾ç‰‡
          zoomOutButton.on("click", function (e) {
            e.stopPropagation();
            zoomImage(0.8);
          });

          // é‡ç½®å›¾ç‰‡
          resetButton.on("click", function (e) {
            e.stopPropagation();
            resetImage();
          });

          function resetImage() {
            imageElement.css({
              transform: "translate(-50%, -50%) scale(1)",
              transition: "transform 0.3s ease-out",
            });
            imageElement.data({
              scale: 1,
              offsetX: 0,
              offsetY: 0,
            });

            // ç§»é™¤è¿‡æ¸¡æ•ˆæœ
            setTimeout(() => {
              imageElement.css("transition", "none");
            }, 300);
          }

          // åŒå‡»æ”¾å¤§/ç¼©å°
          imageElement.on("dblclick", function (e) {
            e.stopPropagation();
            const currentScale = imageElement.data("scale") || 1;
            if (currentScale > 1.1) {
              // å¦‚æœå·²ç»æ”¾å¤§ï¼ŒåŒå‡»åˆ™é‡ç½®
              resetImage();
            } else {
              // å¦åˆ™æ”¾å¤§
              zoomImage(2);
            }
          });

          function zoomImage(factor) {
            const currentScale = imageElement.data("scale") || 1;
            const newScale = Math.max(0.5, Math.min(5, currentScale * factor));

            // è·å–å½“å‰åç§»é‡
            const offsetX = imageElement.data("offsetX") || 0;
            const offsetY = imageElement.data("offsetY") || 0;

            // åº”ç”¨ç¼©æ”¾ï¼ˆä¿æŒå½“å‰åç§»é‡ï¼‰
            imageElement.css({
              transform: `translate(calc(-50% + ${offsetX}px), calc(-50% + ${offsetY}px)) scale(${newScale})`,
              transition: "transform 0.2s ease-out",
            });
            imageElement.data("scale", newScale);
          }

          // æ‹–æ‹½å›¾ç‰‡åŠŸèƒ½ï¼ˆä¿®å¤ç‰ˆï¼‰
          imageElement.on("mousedown", function (e) {
            if (e.button === 0) {
              // åªå“åº”å·¦é”®ç‚¹å‡»
              e.preventDefault();
              imageElement.css("transition", "none");

              imageElement.data({
                isDragging: true,
                startX: e.clientX,
                startY: e.clientY,
                startTranslateX: imageElement.data("offsetX") || 0,
                startTranslateY: imageElement.data("offsetY") || 0,
              });

              imageElement.css("cursor", "grabbing");
            }
          });

          $(document).on("mousemove", function (e) {
            if (imageElement.data("isDragging")) {
              e.preventDefault();

              const startX = imageElement.data("startX");
              const startY = imageElement.data("startY");
              const startTranslateX = imageElement.data("startTranslateX");
              const startTranslateY = imageElement.data("startTranslateY");

              const dx = e.clientX - startX;
              const dy = e.clientY - startY;

              // è®¡ç®—æ–°çš„ä½ç½®
              const newTranslateX = startTranslateX + dx;
              const newTranslateY = startTranslateY + dy;

              // åº”ç”¨æ–°çš„ä½ç½®ï¼ˆä¿æŒå½“å‰ç¼©æ”¾æ¯”ä¾‹ï¼‰
              const currentScale = imageElement.data("scale") || 1;
              imageElement.css(
                "transform",
                `translate(calc(-50% + ${newTranslateX}px), calc(-50% + ${newTranslateY}px)) scale(${currentScale})`
              );

              // ä¿å­˜å½“å‰åç§»é‡
              imageElement.data({
                offsetX: newTranslateX,
                offsetY: newTranslateY,
              });
            }
          });

          $(document).on("mouseup", function (e) {
            if (imageElement.data("isDragging")) {
              e.preventDefault();
              imageElement.data("isDragging", false);
              imageElement.css("cursor", "move");

              // æ·»åŠ æƒ¯æ€§æ•ˆæœ
              applyInertia();
            }
          });

          function applyInertia() {
            // è¿™é‡Œå¯ä»¥æ·»åŠ æƒ¯æ€§æ»‘åŠ¨æ•ˆæœ
            // ç›®å‰ç®€å•å®ç°ï¼Œç›´æ¥åœæ­¢
          }

          // é¼ æ ‡æ»šè½®ç¼©æ”¾
          imageContainer.on("wheel", function (e) {
            e.preventDefault();
            const delta = -Math.sign(e.originalEvent.deltaY);
            zoomImage(delta > 0 ? 1.1 : 0.9);
          });
          // é˜»æ­¢å›¾ç‰‡å®¹å™¨å†…çš„ç‚¹å‡»äº‹ä»¶å†’æ³¡
          imageContainer.on("click", function (e) {
            e.stopPropagation();
          });

          // è§¦æ‘¸äº‹ä»¶æ”¯æŒ
          imageElement.on("touchstart", function (e) {
            if (e.touches.length === 1) {
              const touch = e.touches[0];
              imageElement.css("transition", "none");

              imageElement.data({
                isDragging: true,
                startX: touch.clientX,
                startY: touch.clientY,
                startTranslateX: imageElement.data("offsetX") || 0,
                startTranslateY: imageElement.data("offsetY") || 0,
              });

              e.preventDefault();
            }
          });

          $(document).on("touchmove", function (e) {
            if (imageElement.data("isDragging") && e.touches.length === 1) {
              const touch = e.touches[0];
              const startX = imageElement.data("startX");
              const startY = imageElement.data("startY");
              const startTranslateX = imageElement.data("startTranslateX");
              const startTranslateY = imageElement.data("startTranslateY");

              const dx = touch.clientX - startX;
              const dy = touch.clientY - startY;

              const newTranslateX = startTranslateX + dx;
              const newTranslateY = startTranslateY + dy;

              const currentScale = imageElement.data("scale") || 1;
              imageElement.css(
                "transform",
                `translate(calc(-50% + ${newTranslateX}px), calc(-50% + ${newTranslateY}px)) scale(${currentScale})`
              );

              imageElement.data({
                offsetX: newTranslateX,
                offsetY: newTranslateY,
              });

              e.preventDefault();
            }
          });

          $(document).on("touchend", function (e) {
            if (imageElement.data("isDragging")) {
              imageElement.data("isDragging", false);
              applyInertia();
            }
          });

          // åŒå‡»æ”¾å¤§/ç¼©å°ï¼ˆè§¦æ‘¸è®¾å¤‡ï¼‰
          let lastTap = 0;
          imageElement.on("touchend", function (e) {
            const now = Date.now();
            if (now - lastTap < 300) {
              // åŒå‡»å¤„ç†
              const currentScale = imageElement.data("scale") || 1;
              if (currentScale > 1.1) {
                resetImage();
              } else {
                zoomImage(2);
              }
              e.preventDefault();
            }
            lastTap = now;
          });
        }

        // ======================
        // ç›®å½•å¯¼èˆªåŠŸèƒ½
        // ======================

        /**
         * æ»šåŠ¨åˆ°æŒ‡å®šçš„h3å…ƒç´ 
         * @param {HTMLElement} h3Element è¦æ»šåŠ¨åˆ°çš„h3å…ƒç´ 
         */
        function scrollToH3(h3Element) {
          h3Element.scrollIntoView({ behavior: "smooth" });
        }

        // ======================
        // æ™ºèƒ½æ»šåŠ¨é«˜äº®ç›®å½•åŠŸèƒ½ï¼ˆå®Œæ•´ä¼˜åŒ–ç‰ˆï¼‰
        // ======================
        function setupSmartScrollHighlight() {
          const h3Elements = $("h3").toArray();
          const liElements = $("#h3List li").toArray();
          let isManualSelection = false;
          let lastManualScrollTop = 0;

          if (h3Elements.length === 0 || liElements.length === 0) return;

          // 1. ç¼“å­˜å¸¸ç”¨DOMå…ƒç´ å’Œé…ç½®
          const $window = $(window);
          const $h3List = $("#h3List");
          const $document = $(document);
          const windowHeight = $window.height();
          const topThresholdRatio = CONFIG.config.topThresholdRatio;
          const bottomThresholdRatio = CONFIG.config.bottomThresholdRatio;
          const debounceTime = CONFIG.config.scrollDebounceTime;

          // 2. ä¼˜åŒ–æ˜ å°„å…³ç³» - ä½¿ç”¨æ•°ç»„ç´¢å¼•ç›´æ¥å¯¹åº”
          const h3ToIndexMap = new Map();
          h3Elements.forEach((h3, index) => {
            h3ToIndexMap.set(h3, index);
            $(liElements[index]).data("h3-index", index);
          });

          // 3. ä¼˜åŒ–ä½ç½®è®¡ç®— - é¢„è®¡ç®—å¹¶ç¼“å­˜æ›´å¤šä¿¡æ¯
          let h3Positions = [];
          let lastWindowHeight = windowHeight;

          function calculatePositions() {
            const currentWindowHeight = $window.height();
            if (
              Math.abs(currentWindowHeight - lastWindowHeight) < 50 &&
              h3Positions.length > 0
            ) {
              // çª—å£é«˜åº¦å˜åŒ–ä¸å¤§æ—¶ï¼Œåªæ›´æ–°top/bottomå€¼
              const scrollY = $window.scrollTop();
              h3Positions.forEach((pos) => {
                const rect = pos.element.getBoundingClientRect();
                pos.top = rect.top + scrollY;
                pos.bottom = rect.bottom + scrollY;
              });
            } else {
              // çª—å£é«˜åº¦å˜åŒ–è¾ƒå¤§æ—¶ï¼Œé‡æ–°è®¡ç®—æ‰€æœ‰ä½ç½®
              lastWindowHeight = currentWindowHeight;
              const scrollY = $window.scrollTop();
              h3Positions = h3Elements.map((h3, index) => {
                const rect = h3.getBoundingClientRect();
                const top = rect.top + scrollY;
                const bottom = rect.bottom + scrollY;
                const rangeBottom =
                  index < h3Elements.length - 1
                    ? h3Elements[index + 1].getBoundingClientRect().top +
                      scrollY
                    : $document.height();

                return { element: h3, top, bottom, rangeBottom, index };
              });
            }
          }

          // 4. ä¼˜åŒ–é«˜äº®é€»è¾‘ - ç¡®ä¿é«˜äº®é¡¹å§‹ç»ˆå¯è§
          function highlightLiElement(liElement, isManual = false) {
            if (isManual) {
              isManualSelection = true;
              lastManualScrollTop = $window.scrollTop();
            } else if (isManualSelection) {
              if (Math.abs($window.scrollTop() - lastManualScrollTop) > 100) {
                isManualSelection = false;
              } else {
                return;
              }
            }

            if (highlightedLi === liElement) return;

            // ä½¿ç”¨åŸç”ŸclassListæ“ä½œ
            if (highlightedLi) {
              highlightedLi.classList.remove(
                "highlight",
                "highlight-up",
                "highlight-down"
              );
              highlightedLi.style.animation = "";
            }

            const directionClass =
              updateHighlight.lastScrollDirection === "up"
                ? "highlight-up"
                : "highlight-down";

            liElement.classList.add("highlight", directionClass);
            liElement.style.animation = "none";

            // è§¦å‘é‡ç»˜
            void liElement.offsetWidth;

            // åº”ç”¨è„‰å†²åŠ¨ç”»
            liElement.style.animation = CONFIG.config.pulseAnimation;
            highlightedLi = liElement;

            // ç¡®ä¿é«˜äº®é¡¹å§‹ç»ˆå¯è§ï¼ˆä¼˜åŒ–ç‰ˆï¼‰
            ensureLiVisible(liElement);
          }

          // 5. ç¡®ä¿é«˜äº®é¡¹å§‹ç»ˆå¯è§çš„ä¼˜åŒ–å®ç°
          function ensureLiVisible(liElement) {
            const listContainer = $h3List[0];
            const listRect = listContainer.getBoundingClientRect();
            const liRect = liElement.getBoundingClientRect();

            // è®¡ç®—liå…ƒç´ ç›¸å¯¹äºåˆ—è¡¨å®¹å™¨çš„ä½ç½®
            const liTopRelative =
              liRect.top - listRect.top + listContainer.scrollTop;
            const liHeight = liRect.height;
            const containerHeight = listRect.height;

            // è®¡ç®—ç†æƒ³ä½ç½® - è®©é«˜äº®é¡¹å±…ä¸­æ˜¾ç¤ºï¼ŒåŒæ—¶ä¿ç•™ä¸Šä¸‹æ–‡
            const idealPosition =
              liTopRelative - (containerHeight / 2 - liHeight / 2);

            // è®¡ç®—æœ€å°å’Œæœ€å¤§æ»šåŠ¨ä½ç½®ï¼Œç¡®ä¿ä¸Šä¸‹ä¿ç•™éƒ¨åˆ†å†…å®¹å¯è§
            const minScroll = Math.max(0, idealPosition - liHeight);
            const maxScroll = Math.min(
              listContainer.scrollHeight - containerHeight,
              idealPosition + liHeight
            );

            // ç¡®ä¿ä¸ä¼šæ»šåŠ¨åˆ°åˆ—è¡¨è¾¹ç•Œä¹‹å¤–
            const targetScroll = Math.max(
              0,
              Math.min(
                listContainer.scrollHeight - containerHeight,
                idealPosition
              )
            );

            // åº”ç”¨å¹³æ»‘æ»šåŠ¨
            if (Math.abs(listContainer.scrollTop - targetScroll) > 1) {
              smoothScrollTo(listContainer, targetScroll, 300);
            }
          }

          // 6. å¹³æ»‘æ»šåŠ¨å‡½æ•°ï¼ˆå¸¦è¾¹ç•Œæ£€æŸ¥ï¼‰
          function smoothScrollTo(element, target, duration) {
            const start = element.scrollTop;
            const change = target - start;
            const startTime = performance.now();

            // ç¡®ä¿ç›®æ ‡ä½ç½®åœ¨æœ‰æ•ˆèŒƒå›´å†…
            const maxScroll = element.scrollHeight - element.clientHeight;
            const clampedTarget = Math.max(0, Math.min(maxScroll, target));

            function animateScroll(currentTime) {
              const elapsed = currentTime - startTime;
              const progress = Math.min(elapsed / duration, 1);
              const easeProgress = easeInOutQuad(progress);
              element.scrollTop = start + change * easeProgress;

              if (progress < 1) {
                requestAnimationFrame(animateScroll);
              }
            }

            requestAnimationFrame(animateScroll);
          }

          // ç¼“åŠ¨å‡½æ•°
          function easeInOutQuad(t) {
            return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;
          }

          // 7. æ ¸å¿ƒé«˜äº®é€»è¾‘ä¼˜åŒ–
          function updateHighlight() {
            const scrollPosition = $window.scrollTop();
            const windowHeight = $window.height();
            const topThreshold =
              scrollPosition + windowHeight * topThresholdRatio;
            const bottomThreshold =
              scrollPosition + windowHeight * bottomThresholdRatio;

            // æ£€æµ‹æ»šåŠ¨æ–¹å‘
            let scrollDirection = "down";
            if (typeof updateHighlight.lastScrollPosition !== "undefined") {
              scrollDirection =
                scrollPosition > updateHighlight.lastScrollPosition
                  ? "down"
                  : "up";
            }
            updateHighlight.lastScrollPosition = scrollPosition;
            updateHighlight.lastScrollDirection = scrollDirection;

            // ç‰¹æ®Šå¤„ç†é¡µé¢åº•éƒ¨
            if (scrollPosition + windowHeight >= $document.height() - 50) {
              highlightLiElement(liElements[liElements.length - 1]);
              return;
            }

            let activeIndex = -1;

            // ä¼˜åŒ–æŸ¥æ‰¾é€»è¾‘ - ä»ä¸Šæ¬¡ä½ç½®å¼€å§‹æŸ¥æ‰¾
            const startIndex = updateHighlight.lastActiveIndex || 0;

            if (scrollDirection === "up") {
              // å‘ä¸Šæ»šåŠ¨æ—¶ä»ä¸‹å¾€ä¸Šæ‰¾
              for (
                let i = Math.min(startIndex, h3Positions.length - 1);
                i >= 0;
                i--
              ) {
                if (h3Positions[i].top <= topThreshold) {
                  activeIndex = i;
                  break;
                }
              }
            } else {
              // å‘ä¸‹æ»šåŠ¨æ—¶ä»ä¸Šå¾€ä¸‹æ‰¾
              for (
                let i = Math.max(0, startIndex);
                i < h3Positions.length;
                i++
              ) {
                if (h3Positions[i].bottom >= bottomThreshold) {
                  activeIndex = i > 0 ? i - 1 : 0;
                  break;
                }
              }
            }

            // å¦‚æœæ²¡æ‰¾åˆ°ï¼Œä½¿ç”¨ä¸­å¿ƒç‚¹æ£€æµ‹
            if (activeIndex === -1) {
              const viewportCenter = scrollPosition + windowHeight * 0.5;
              let minDistance = Infinity;

              for (let i = 0; i < h3Positions.length; i++) {
                const pos = h3Positions[i];
                const distance = Math.abs(
                  (pos.top + pos.bottom) / 2 - viewportCenter
                );
                if (distance < minDistance) {
                  minDistance = distance;
                  activeIndex = i;
                }
              }
            }

            // æ‰§è¡Œé«˜äº®
            if (activeIndex !== -1) {
              updateHighlight.lastActiveIndex = activeIndex;
              highlightLiElement(liElements[activeIndex]);
            }
          }

          // 8. ç‚¹å‡»å¤„ç†å‡½æ•° - ç¡®ä¿ç‚¹å‡»åé«˜äº®é¡¹å§‹ç»ˆå¯è§
          function handleLiClick(event) {
            const liElement = event.currentTarget;
            const h3Index = $(liElement).data("h3-index");

            if (h3Index !== undefined && h3Elements[h3Index]) {
              h3Elements[h3Index].getBoundingClientRect();
              h3Elements[h3Index].scrollIntoView();
            }

            highlightLiElement(liElement, true);

            // é‡åŠ›ä¸‹è½æ•ˆæœ
            liElement.animate(
              [
                { transform: "translateY(0)", easing: "ease-out" },
                { transform: "translateY(30px)", easing: "ease-in" },
                { transform: "translateY(0)", easing: "ease-out" },
              ],
              {
                duration: 600,
              }
            );
          }

          // 9. ä¼˜åŒ–äº‹ä»¶ç»‘å®šå’Œé˜²æŠ–
          let scrollTimeout;
          let resizeTimeout;
          let animationFrameId;

          function handleScroll() {
            if (scrollTimeout) clearTimeout(scrollTimeout);

            scrollTimeout = setTimeout(() => {
              if (animationFrameId) cancelAnimationFrame(animationFrameId);
              animationFrameId = requestAnimationFrame(() => {
                calculatePositions();
                updateHighlight();
              });
            }, debounceTime);
          }

          function handleResize() {
            if (resizeTimeout) clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
              if (animationFrameId) cancelAnimationFrame(animationFrameId);
              animationFrameId = requestAnimationFrame(() => {
                calculatePositions();
                updateHighlight();
              });
            }, 200);
          }

          // 10. åˆå§‹åŒ–äº‹ä»¶ç»‘å®š
          $window.on("scroll", handleScroll);
          $window.on("resize", handleResize);

          // ç»‘å®šç‚¹å‡»äº‹ä»¶
          liElements.forEach((li) => {
            $(li).off("click").on("click", handleLiClick);
          });

          // åˆå§‹è®¡ç®—ä½ç½®
          calculatePositions();
          updateHighlight();
        }

        /**
         * é«˜äº®ç‚¹å‡»çš„ç›®å½•é¡¹
         * @param {Event} event ç‚¹å‡»äº‹ä»¶
         */
        function highlightLi(event) {
          if (highlightedLi) {
            $(highlightedLi).removeClass("highlight");
          }

          const liElement = event.currentTarget;
          $(liElement).addClass("highlight");
          highlightedLi = liElement;

          // æ·»åŠ é‡åŠ›ä¸‹è½æ•ˆæœ
          liElement.animate(
            [
              { transform: "translateY(0)", easing: "ease-out" },
              { transform: "translateY(30px)", easing: "ease-in" },
              { transform: "translateY(0)", easing: "ease-out" },
            ],
            {
              duration: 600,
            }
          );
        }

        // ======================
        // UIè‡ªåŠ¨éšè—åŠŸèƒ½
        // ======================
        showDocument();

        function showDocument() {
          let timeoutId;
          let elementsHidden = false;
          let savedScrollPosition = 0;
          let savedListScrollPosition = 0;
          let isUIRestoring = false;

          $(window).on("mouseover", handleMouseOver);
          $(window).on("mouseout", handleMouseOut);

          /**
           * å¤„ç†é¼ æ ‡ç§»å…¥äº‹ä»¶ - æ˜¾ç¤ºUIå…ƒç´ 
           */
          function handleMouseOver() {
            clearTimeout(timeoutId);

            if (elementsHidden) {
              isUIRestoring = true;

              // 1. å…ˆæ¢å¤åˆ—è¡¨æ»šåŠ¨ä½ç½®ï¼ˆæ— åŠ¨ç”»ï¼‰
              const h3List = $("#h3List");
              const originalScrollBehavior = h3List.css("scroll-behavior");
              h3List.css("scroll-behavior", "auto");
              h3List.scrollTop(savedListScrollPosition);

              // 2. æ˜¾ç¤ºUIå…ƒç´ 
              $(".box").css({
                display: "flex",
                opacity: "1",
              });
              $(".fileBox").css({
                display: "block",
                opacity: "1",
              });

              // 3. æ¢å¤é¡µé¢æ»šåŠ¨ä½ç½®
              window.scrollTo({
                top: savedScrollPosition,
                behavior: "auto",
              });

              // 4. å»¶è¿Ÿæ¢å¤åŸæœ‰æ»šåŠ¨è¡Œä¸ºå¹¶ç¡®ä¿é«˜äº®å†…å®¹å¯è§
              setTimeout(() => {
                h3List.css("scroll-behavior", originalScrollBehavior);
                isUIRestoring = false;

                // ç¡®ä¿ç›®å½•ä¸­çš„é«˜äº®é¡¹å¯è§
                if (highlightedLi) {
                  ensureLiVisible(highlightedLi);
                }

                // ç¡®ä¿ä¸»å†…å®¹åŒºçš„é«˜äº®h3å…ƒç´ å¯è§
                const h3Elements = $("h3").toArray();
                const liElements = $("#h3List li").toArray();
                const highlightedIndex = liElements.indexOf(highlightedLi);

                if (highlightedIndex >= 0 && h3Elements[highlightedIndex]) {
                  const h3Element = h3Elements[highlightedIndex];
                  const rect = h3Element.getBoundingClientRect();
                  const windowHeight = window.innerHeight;

                  // å¦‚æœé«˜äº®å…ƒç´ ä¸åœ¨è§†å£ä¸­ï¼Œæ»šåŠ¨åˆ°å®ƒ
                  if (rect.top < 0 || rect.bottom > windowHeight) {
                    h3Element.scrollIntoView({
                      behavior: "smooth",
                      block: "center",
                    });
                  }
                }
              }, 50);

              elementsHidden = false;
            }
          }

          /**
           * å¤„ç†é¼ æ ‡ç§»å‡ºäº‹ä»¶ - å»¶è¿Ÿéšè—UIå…ƒç´ 
           */
          function handleMouseOut(event) {
            if (
              event.relatedTarget === null ||
              event.relatedTarget === undefined
            ) {
              if (!elementsHidden && !isUIRestoring) {
                savedScrollPosition = window.scrollY;
                savedListScrollPosition = $("#h3List").scrollTop();

                $(".box").css(
                  "transition",
                  `opacity ${CONFIG.uiVisibility.fadeOutDuration}ms`
                );
                $(".fileBox").css(
                  "transition",
                  `opacity ${CONFIG.uiVisibility.fadeOutDuration}ms`
                );

                timeoutId = setTimeout(() => {
                  $(".box, .fileBox").css("opacity", "0");

                  setTimeout(() => {
                    $(".box").css("display", "none");
                    $(".fileBox").css("display", "none");
                    elementsHidden = true;

                    $(".box").css("transition", "none");
                    $(".fileBox").css("transition", "none");
                  }, CONFIG.uiVisibility.hideDelay);
                }, CONFIG.uiVisibility.fadeOutDelay);
              }
            }
          }
        }

        // ======================
        // æ–‡æœ¬å¤åˆ¶åŠŸèƒ½
        // ======================

        /**
         * å¤åˆ¶æ–‡æœ¬å¹¶æ˜¾ç¤ºæ•ˆæœ
         * @param {Event} event ç‚¹å‡»äº‹ä»¶
         */
        function copyText(event) {
          const pTag = $(event.currentTarget);
          const parentDiv = pTag.parent();
          const pTagsInDiv = parentDiv.find("p").length;

          // å¤åˆ¶æ–‡æœ¬é€»è¾‘
          let textToCopy = "";
          pTag.contents().each(function () {
            if (this.nodeType === Node.TEXT_NODE) {
              textToCopy += this.textContent;
            } else if (this.tagName === "SPAN") {
              textToCopy += "\n" + $(this).text();
            }
          });
          copyToClipboard(textToCopy);
          showNotification();

          // é«˜äº®é€»è¾‘
          $("#output .divHighlight, #output .highlight").removeClass(
            "divHighlight highlight flowing-border"
          );

          const target = pTagsInDiv === 1 ? parentDiv : pTag;
          const highlightClass =
            pTagsInDiv === 1 ? "divHighlight" : "highlight";

          target
            .addClass(highlightClass)
            .css({
              position: "relative",
              overflow: "visible",
            })
            .addClass("flowing-border");

          // å¼ºåˆ¶æ˜¾ç¤ºæ ‡è®°ï¼ˆè§£å†³æµè§ˆå™¨æ¸²æŸ“é—®é¢˜ï¼‰
          void target[0].offsetWidth;

          // å®šæ—¶ç§»é™¤æµå…‰æ•ˆæœ
          setTimeout(() => {
            target.removeClass("flowing-border");
          }, CONFIG.copyEffect.highlightDuration);

          // å…¨å±è‰²å½©æ³¢åŠ¨æ•ˆæœ
          createColorWaveEffect(event);
          // ç²’å­é‡ç»„åŠ¨ç”»
          createQuantumEffect(event);
        }

        /**
         * é‡å­ç²’å­é‡ç»„æ•ˆæœ
         * @param {Event} event è§¦å‘äº‹ä»¶
         */
        function createQuantumEffect(event) {
          const quantum = $("<div>").addClass("quantum-field");
          const x = event.clientX;
          const y = event.clientY;

          // åˆ›å»ºé‡å­ç²’å­
          for (let i = 0; i < 80; i++) {
            const particle = $("<div>")
              .addClass("quantum-particle")
              .css({
                "--x": `${Math.random() * 200 - 100}px`,
                "--y": `${Math.random() * 200 - 100}px`,
                "--size": `${3 + Math.random() * 5}px`,
                "--color": `hsl(${Math.random() * 360}, 100%, 50%)`,
                "--delay": `${Math.random() * 0.5}s`,
              });
            quantum.append(particle);
          }

          $("body").append(quantum);
          quantum.css({ left: x + "px", top: y + "px" });

          setTimeout(() => {
            quantum.addClass("quantum-active");
            setTimeout(() => quantum.remove(), 2000);
          }, 100);
        }

        /**
         * å…¨å±è‰²å½©æ³¢åŠ¨æ•ˆæœ
         */
        function createColorWaveEffect() {
          const wave = $("<div>").addClass("color-wave");
          $("body").append(wave);

          setTimeout(() => {
            wave.animate({ opacity: 0 }, 1000, () => wave.remove());
          }, 500);
        }

        // ======================
        // é€šçŸ¥ç³»ç»Ÿ (æ–°ç‰ˆæœ¬)
        // ======================

        /**
         * æ˜¾ç¤ºå¤åˆ¶æˆåŠŸçš„é€šçŸ¥
         */
        function showNotification() {
          const notification = $(".notification");

          // å¦‚æœæ­£åœ¨åŠ¨ç”»ä¸­ï¼Œå…ˆå®Œæˆå½“å‰åŠ¨ç”»
          if (isAnimating) {
            notification.stop(true, true).removeClass("animate-in animate-out");
            isAnimating = false;
          }

          // é‡ç½®é€šçŸ¥çŠ¶æ€
          notification.css({
            top: "-100px",
            opacity: "0",
            transform: "translateX(-50%) scale(0.8)",
          });

          // éšæœºé€‰æ‹©è¡¨æƒ…ç¬¦å·
          const randomEmoji =
            CONFIG.copyEffect.notification.emojis[
              Math.floor(
                Math.random() * CONFIG.copyEffect.notification.emojis.length
              )
            ];
          notification.html(`${randomEmoji} å¤åˆ¶æˆåŠŸ ${randomEmoji}`);

          // å¼€å§‹å…¥åœºåŠ¨ç”»
          isAnimating = true;
          notification.addClass("animate-in");

          // æ·»åŠ ç²’å­çˆ†ç‚¸æ•ˆæœ
          createNotificationParticles();

          // åŠ¨ç”»ç»“æŸäº‹ä»¶å¤„ç†
          notification.on("animationend", function () {
            if ($(this).hasClass("animate-in")) {
              // å…¥åœºåŠ¨ç”»ç»“æŸï¼Œè®¾ç½®é€€åœºå®šæ—¶å™¨
              notificationTimeout = setTimeout(() => {
                $(this).removeClass("animate-in").addClass("animate-out");
              }, CONFIG.copyEffect.notification.showDuration);
            } else if ($(this).hasClass("animate-out")) {
              // é€€åœºåŠ¨ç”»ç»“æŸï¼Œé‡ç½®çŠ¶æ€
              $(this).removeClass("animate-out");
              isAnimating = false;
            }
          });
        }

        /**
         * åˆ›å»ºé€šçŸ¥ç²’å­æ•ˆæœ
         */
        function createNotificationParticles() {
          const notification = $(".notification")[0];
          if (!notification) return;

          // è·å–é€šçŸ¥ä½ç½®
          const rect = notification.getBoundingClientRect();
          const centerX = rect.left + rect.width / 2;
          const centerY = rect.top + rect.height / 2;

          // åˆ›å»ºç²’å­
          for (let i = 0; i < CONFIG.copyEffect.particles.count; i++) {
            const particle = document.createElement("div");
            particle.className = "notification-particle";

            // éšæœºç²’å­å±æ€§
            const size =
              CONFIG.copyEffect.particles.minSize +
              Math.random() *
                (CONFIG.copyEffect.particles.maxSize -
                  CONFIG.copyEffect.particles.minSize);
            const color =
              CONFIG.copyEffect.particles.colors[
                Math.floor(
                  Math.random() * CONFIG.copyEffect.particles.colors.length
                )
              ];
            const angle = Math.random() * Math.PI * 2;
            const distance =
              Math.random() * CONFIG.copyEffect.particles.maxDistance;
            const duration = Math.random() * 1 + 0.5;

            // è®¾ç½®ç²’å­æ ·å¼
            particle.style.cssText = `
              left: ${centerX}px;
              top: ${centerY}px;
              width: ${size}px;
              height: ${size}px;
              background: ${color};
              box-shadow: 0 0 ${size / 2}px ${color};
              animation: particle-move-${i} ${duration}s ease-out forwards;
            `;

            // åˆ›å»ºç²’å­åŠ¨ç”»
            const style = document.createElement("style");
            style.innerHTML = `
              @keyframes particle-move-${i} {
                0% {
                  transform: translate(-50%, -50%) scale(1);
                  opacity: 1;
                }
                100% {
                  transform: translate(${Math.cos(angle) * distance - 50}%, 
                                  ${Math.sin(angle) * distance - 50}%) scale(0);
                  opacity: 0;
                }
              }
            `;

            // æ·»åŠ åˆ°æ–‡æ¡£
            document.head.appendChild(style);
            document.body.appendChild(particle);

            // åŠ¨ç”»ç»“æŸåç§»é™¤
            setTimeout(() => {
              particle.remove();
              style.remove();
            }, duration * 1000);
          }
        }

        /**
         * å¤åˆ¶æ–‡æœ¬åˆ°å‰ªè´´æ¿
         * @param {string} text è¦å¤åˆ¶çš„æ–‡æœ¬
         */
        function copyToClipboard(text) {
          const textarea = $("<textarea>").val(text);
          $("body").append(textarea);
          textarea.select();
          document.execCommand("copy");
          textarea.remove();
        }

        // ======================
        // èƒŒæ™¯åª’ä½“åˆ‡æ¢åŠŸèƒ½
        // ======================
        $(function () {
          let media = $("#background-video");
          const btn = $("#myElement");

          let currentIndex = 0;

          /**
           * åˆå§‹åŒ–èƒŒæ™¯
           */
          function initBackground() {
            const first = CONFIG.backgroundMedia[0];
            if (first.type === "video") {
              $("#background-video source").attr("src", first.src);
              media[0].load();
            } else if (first.type === "image") {
              $("#background-video").replaceWith(`
                <img id="background-video" src="${first.src}" style="margin-left: 10px;" alt="background">
              `);
              media = $("#background-video");
            }
          }

          /**
           * åˆ‡æ¢èƒŒæ™¯åª’ä½“
           */
          function changeMedia() {
            currentIndex = (currentIndex + 1) % CONFIG.backgroundMedia.length;
            const current = CONFIG.backgroundMedia[currentIndex];

            $("#background-video").fadeOut(300, function () {
              if (current.type === "video") {
                if ($(this).is("video")) {
                  $(this).find("source").attr("src", current.src);
                  this.load();
                } else {
                  $(this).replaceWith(`
                    <video id="background-video" preload="auto" autoplay loop muted>
                      <source src="${current.src}" type="video/mp4" />
                    </video>`);
                }
              } else if (current.type === "image") {
                if ($(this).is("img")) {
                  $(this).attr("src", current.src);
                } else {
                  $(this).replaceWith(`
                    <img id="background-video" src="${current.src}" alt="background">`);
                }
              }

              media = $("#background-video");
              media.fadeIn(300);
            });
          }

          media = $("#background-video");
          if (media.length === 0) {
            console.error("èƒŒæ™¯å…ƒç´ ä¸¢å¤±ï¼");
            return;
          }

          btn.on("click", changeMedia);
          initBackground();
        });

        // ======================
        // å¿ƒè·³åŠ¨ç”»åŠŸèƒ½
        // ======================
        const heartContainer = $("<div>").css({
          position: "fixed",
          top: "0",
          left: "0",
          width: "100%",
          height: "100%",
          pointerEvents: "none",
          overflow: "hidden",
          zIndex: "99999",
        });
        $("body").append(heartContainer);

        $("#output").on("click", function (e) {
          if (
            e.target.tagName === "P" ||
            (e.target.tagName === "SPAN" &&
              e.target.parentElement.tagName === "P")
          ) {
            const x = e.clientX;
            const y = e.clientY;

            for (let i = 0; i < CONFIG.heartAnimation.count; i++) {
              const heart = $("<div>").addClass("heart").text("ğŸ’• âœ¨").css({
                position: "absolute",
                fontSize: "24px",
                color: "red",
                pointerEvents: "none",
                animation: "floatUp 3s forwards",
              });

              const randomOffsetX =
                (Math.random() - 0.5) * CONFIG.heartAnimation.maxOffsetX;
              const randomOffsetY =
                (Math.random() - 0.5) * CONFIG.heartAnimation.maxOffsetY;

              const finalLeft = Math.max(
                0,
                Math.min(x + randomOffsetX, $(window).width() - 50)
              );
              const finalTop = Math.max(
                0,
                Math.min(y + randomOffsetY, $(window).height() - 50)
              );

              heart.css({
                left: `${finalLeft}px`,
                top: `${finalTop}px`,
              });

              heartContainer.append(heart);

              heart.on("animationend", function () {
                $(this).remove();
              });
            }
          }
        });

        // ======================
        // æ—¶é—´æ˜¾ç¤ºåŠŸèƒ½
        // ======================

        /**
         * æ›´æ–°æŒ‡å®šæ—¶åŒºçš„æ—¶é—´
         * @param {string} elementId æ˜¾ç¤ºæ—¶é—´çš„å…ƒç´ ID
         * @param {string} regionName åœ°åŒºåç§°
         * @param {number} utcOffsetHours UTCåç§»é‡(å°æ—¶)
         */
        function updateTimezoneTime(elementId, regionName, utcOffsetHours) {
          const now = new Date();
          const utcTime = now.getTime() + now.getTimezoneOffset() * 60000;
          const targetTime = new Date(utcTime + utcOffsetHours * 3600000);

          const hours = String(targetTime.getHours()).padStart(2, "0");
          const minutes = String(targetTime.getMinutes()).padStart(2, "0");
          const seconds = String(targetTime.getSeconds()).padStart(2, "0");

          document.getElementById(
            elementId
          ).textContent = `${regionName}: ${hours}:${minutes}:${seconds}`;
        }

        /**
         * æ›´æ–°æ‰€æœ‰æ—¶åŒºæ—¶é—´
         */
        function updateAllTimes() {
          CONFIG.timeZones.forEach((zone) => {
            updateTimezoneTime(zone.id, zone.name, zone.offset);
          });
        }

        // å¯åŠ¨æ—¶é’Ÿ
        setInterval(updateAllTimes, 1000);
        updateAllTimes();
      });

      // ======================
      // é¼ æ ‡è½¨è¿¹æ•ˆæœ
      // ======================
      $(document).on("mousemove", function (e) {
        const now = Date.now();
        if (now - lastTime < 50) return; // é™åˆ¶é¢‘ç‡
        lastTime = now;

        const speed = Math.sqrt(
          Math.pow(e.clientX - lastX, 2) + Math.pow(e.clientY - lastY, 2)
        );
        lastX = e.clientX;
        lastY = e.clientY;

        // ç§»é™¤æœ€æ—§çš„æ³¢çº¹ï¼ˆå¦‚æœè¶…è¿‡æœ€å¤§æ•°é‡ï¼‰
        if (rippleCount >= CONFIG.mouseRipple.maxRipples) {
          $(".mouse-ripple").first().remove();
          rippleCount--;
        }

        const ripple = $("<div>").addClass("mouse-ripple");
        const size = Math.min(
          CONFIG.mouseRipple.maxSize,
          CONFIG.mouseRipple.baseSize + speed * CONFIG.mouseRipple.speedFactor
        );

        const color = `hsla(${
          (e.clientX / window.innerWidth) * 360
        }, 80%, 60%, 0.5)`;

        ripple
          .css({
            position: "fixed",
            left: e.clientX + "px",
            top: e.clientY + "px",
            width: "0",
            height: "0",
            border: `3px solid ${color}`,
            borderRadius: "50%",
            transform: "translate(-50%, -50%)",
            pointerEvents: "none",
            zIndex: 9997,
            boxShadow: `0 0 10px ${color}`,
          })
          .appendTo("body");

        rippleCount++;

        ripple.animate(
          {
            width: size + "px",
            height: size + "px",
            opacity: 0,
          },
          CONFIG.mouseRipple.animationDuration,
          function () {
            $(this).remove();
            rippleCount--;
          }
        );
      });

      // æ·»åŠ å¿ƒè·³åŠ¨ç”»çš„CSS
      $("<style>")
        .text(
          `
          @keyframes floatUp {
              0% {
                  transform: translateY(0) scale(1);
                  opacity: 1;
              }
              100% {
                  transform: translateY(-100px) scale(1.5);
                  opacity: 0;
              }
          }
        `
        )
        .appendTo("head");
    </script>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        min-height: 100vh;
        overflow-x: hidden;
      }

      body {
        background-color: #ccc;
        background-size: cover;
        background-position: center center;
        background-repeat: no-repeat;
        background-attachment: fixed;
      }

      #background-wrapper {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        overflow: hidden;
      }

      #background-video,
      #background-wrapper img {
        width: 100%;
        height: 100%;
        margin-left: 0px;
        object-fit: cover;
      }

      li {
        list-style: none;
      }
      h3 {
        height: 35px;
        line-height: 30px;
        margin: 10px 0px 10px 10px;
        border: 2px solid #fdc305;
        background: -webkit-linear-gradient(
          top,
          rgba(0, 0, 0, 0.2),
          rgba(0, 0, 0, 0.6)
        );
        border-radius: 13px;
        text-align: center;
        color: rgb(251, 255, 1);
        box-shadow: 2px 2px 3px rgba(187, 140, 9, 0.5);
      }

      h4 {
        width: fit-content;
        padding: 3px 10px;
        margin: 0 30px 3px 10px;
        color: rgb(65, 5, 185);
        border: 1px solid #9ab4ccc4;
        border-radius: 8px;
        background: -webkit-linear-gradient(top, #f1f8ffd0, #a4c7e6a6);
        font-size: 14px;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
      }
      h5 {
        width: fit-content;
        padding: 2px 6px;
        margin-left: 10px;
        margin-bottom: 3px;
        color: #39046bf3;
        border: 1px solid #9ab4ccc4;
        border-radius: 8px;
        background: -webkit-linear-gradient(top, #b2f7ceb9, #39bb6fb9);
        font-size: 14px;
      }
      h6 {
        width: fit-content;
        padding: 2px 6px;
        margin-left: 10px;
        margin-bottom: 3px;
        color: black;
        border: 1px solid #bbd0e4c4;
        border-radius: 8px;
        background: -webkit-linear-gradient(top, #fafafac4, #e5f5ebbe);
        font-size: 14px;
      }
      span,
      i {
        display: block;
        padding-left: 8px;
        font-style: normal;
      }
      i {
        color: rgb(6, 6, 189);
        font-weight: 400;
        border-left: 4px solid #1f7014;
      }
      h6 > i:nth-child(1) {
        margin-top: 5px;
      }
      video {
        position: fixed;
        z-index: -99;
      }
      img {
        width: 150px;
        height: 150px;
        margin: 0px 3px 10px 0px;
        border-radius: 15px;
        transition: transform 0.3s ease-in-out;
        cursor: pointer;
        object-fit: cover;
      }
      img:hover {
        filter: none;
        transform: scale(1.1);
      }

      div > img {
        margin-left: 10px;
      }

      input[type="file"] {
        display: none;
      }
      .fileBox {
        width: fit-content;
        margin: 10px auto;
      }
      .custom-file-input {
        background-color: #fda10d;
        color: white;
        padding: 10px 15px;
        margin: 0px 10px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      .fileBox:hover label {
        background-color: #f39d12e5;
      }

      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: linear-gradient(to right, #93c0f1, #ffffff, #93c0f1);
        border-radius: 10px;
      }

      ::-webkit-scrollbar-thumb {
        background: -webkit-linear-gradient(top, #fab547, #fb9d02);
        border-radius: 10px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: -webkit-linear-gradient(top, #f1953f, #fc7b03);
      }

      .box {
        display: flex;
        margin: 10px auto;
        min-width: 300px;
        overflow: hidden;
      }

      .box1 {
        flex: 1;
        min-width: 0;
      }

      .menuLeft {
        width: 88px;
        flex-shrink: 0;
      }
      .menuLeft ul {
        position: fixed;
        margin: 35px 0 0 0px;
        padding: 0 5px;
        height: 91%;
        overflow-y: auto; /* æ·»åŠ å‚ç›´æ»šåŠ¨æ¡ */
        /* overflow-x: hidden; */ /* éšè—æ°´å¹³æ»šåŠ¨æ¡ */
      }
      .menuLeft ul::-webkit-scrollbar {
        display: none;
      }
      .menuLeft ul li {
        width: fit-content;
        margin-bottom: 3px;
        padding: 6px;
        background: linear-gradient(
          to bottom,
          #045e88,
          #045e88,
          #1c84b4,
          #278ebe,
          #1c84b4,
          #045e88,
          #045e88
        );
        border-radius: 10px;
        line-height: 23px;
        color: white;
        cursor: pointer;
        z-index: 999;
      }

      .menuLeft ul li:nth-child(n + 17) {
        background: linear-gradient(
          to bottom,
          #016464,
          #008080,
          #019191,
          #01a3a3,
          #019191,
          #008080,
          #016464
        );
      }

      .menuLeft ul li:nth-child(n + 29) {
        background: linear-gradient(
          to bottom,
          #36702e,
          #3b8031,
          #429336,
          #4a9c3f,
          #429336,
          #3b8031,
          #36702e
        );
      }
      .menuLeft ul li:nth-child(n + 33) {
        background: linear-gradient(
          to bottom,
          #6715b4,
          #741fc4,
          #8a2be2,
          #a150ec,
          #8a2be2,
          #741fc4,
          #6715b4
        );
      }

      .menuLeft ul li:hover {
        background: -webkit-linear-gradient(top, hotpink, darkorange);
        transform: scale(1.1);
      }
      .headContent {
        width: 100px;
        height: 30px;
      }
      .menuLeft > .headContent {
        position: fixed;
        display: none;
        width: fit-content;
        padding: 3px 5px;
        margin-left: 12px;
        height: 32px;
        color: white;
        border: 2px darkorange solid;
        background-color: #f0fcee2f;
        border-radius: 48%;
        cursor: pointer;
      }
      .menuLeft > .headContent:hover {
        background-color: #ffeefe34;
        border-color: #1f7014;
      }

      #output {
        flex: 1;
        max-width: calc(100% - 10px);
        overflow-wrap: break-word;
        word-break: break-word;
      }
      #output > div {
        position: relative;
        width: fit-content;
        height: auto;
        padding: 2px;
        margin: 0 5px 5px 10px;
        background-color: white;
        border-radius: 8px;
        color: black;
        font-size: 17px;
        cursor: pointer;
        box-shadow: 2px 2px 4px #575757da;
      }
      #output > div p {
        padding: 5px;
        border-radius: 5px;
      }

      #output > div p:nth-child(even) {
        background: -webkit-linear-gradient(top, #fcffff, #def5fa);
        color: rgb(78, 207, 2);
      }

      #output > div p:hover {
        background: -webkit-linear-gradient(top, #fcd, #fca);
      }

      #output > div p:nth-child(even):hover {
        color: red;
      }

      #output > div:hover {
        transform: scale(1.01);
        position: relative;
      }

      #output > div.divHighlight p:hover {
        background: transparent !important;
      }

      #output .divHighlight::before,
      #output .highlight::before {
        content: "â£ï¸" !important;
        position: absolute;
        left: -25px;
        top: 20%;
        transform: translateY(-50%);
        font-size: 24px;
        z-index: 9999;
        animation: pulse 1s infinite;
        color: #ff0000;
        text-shadow: 0 0 5px rgba(255, 0, 0, 0.7);
      }

      #h3List li::before {
        content: none !important;
      }

      .notification {
        position: fixed;
        top: -100px;
        left: 50%;
        transform: translateX(-50%);
        background: linear-gradient(135deg, #ff00cc, #3333ff, #00ffcc, #ffcc00);
        background-size: 300% 300%;
        color: white;
        padding: 15px 30px;
        border-radius: 50px;
        font-size: 22px;
        font-weight: 700;
        opacity: 0;
        z-index: 999999;
        box-shadow: 0 0 20px rgba(255, 255, 255, 0.5),
          0 0 40px rgba(255, 0, 255, 0.5), 0 0 60px rgba(0, 255, 255, 0.3);
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        pointer-events: none;
      }

      .notification.animate-in {
        animation: slideIn 0.6s forwards, gradientBG 3s ease infinite,
          pulseText 1.5s ease infinite alternate;
      }

      .notification.animate-out {
        animation: slideOut 0.6s forwards;
      }

      @keyframes gradientBG {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      @keyframes pulseText {
        0% {
          transform: translateX(-50%) scale(1);
        }
        50% {
          transform: translateX(-50%) scale(1.1);
        }
        100% {
          transform: translateX(-50%) scale(1);
        }
      }

      @keyframes slideIn {
        0% {
          top: -100px;
          opacity: 0;
          transform: translateX(-50%) scale(0.8) rotate(-10deg);
        }
        70% {
          top: 80px;
          opacity: 1;
          transform: translateX(-50%) scale(1.1) rotate(5deg);
        }
        100% {
          top: 60px;
          opacity: 1;
          transform: translateX(-50%) scale(1) rotate(0deg);
        }
      }

      @keyframes slideOut {
        0% {
          top: 60px;
          opacity: 1;
          transform: translateX(-50%) scale(1);
        }
        30% {
          top: 100px;
          opacity: 0.8;
          transform: translateX(-50%) scale(1.1);
        }
        100% {
          top: -100px;
          opacity: 0;
          transform: translateX(-50%) scale(0.8) rotate(10deg);
        }
      }

      .notification-particle {
        position: fixed;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        pointer-events: none;
        z-index: 999999;
        transform: translate(-50%, -50%);
      }

      .highlight,
      .divHighlight {
        background: -webkit-linear-gradient(top, #db149f, #ad0789) !important;
        color: white !important;
        transition: background 0.3s ease;
        box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.3);
      }

      li.highlight {
        background: linear-gradient(
          to bottom,
          #ad0789,
          #c718a1,
          #db149f,
          #f043bc,
          #db149f,
          #c718a1,
          #ad0789
        ) !important;
        color: white !important;
      }

      .bottom {
        display: flex;
        position: fixed;
        bottom: 0;
        width: 100%;
        height: 30px;
        background-color: #777777bb;
        color: yellow;
        font-size: 18px;
      }
      .bottom > div {
        flex: 1;
        line-height: 30px;
        text-align: center;
      }

      #background-video {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
      }

      @keyframes pulseHighlight {
        0% {
          transform: scale(1);
          box-shadow: 0 0 0 rgba(255, 255, 255, 0.7);
        }
        50% {
          transform: scale(1.1);
          box-shadow: 0 0 10px rgba(255, 255, 255, 0.9);
        }
        100% {
          transform: scale(1);
          box-shadow: 0 0 0 rgba(255, 255, 255, 0.7);
        }
      }

      li.highlight {
        animation: pulseHighlight 0.5s ease-out;
        position: relative;
        z-index: 1;
      }

      @keyframes pulse {
        0% {
          transform: translateY(-50%) scale(1);
        }
        50% {
          transform: translateY(-50%) scale(1.3);
        }
        100% {
          transform: translateY(-50%) scale(1);
        }
      }
      @keyframes borderFlow {
        0% {
          border-color: #ff00cc;
          box-shadow: 0 0 10px #ff00cc;
        }
        25% {
          border-color: #3333ff;
          box-shadow: 0 0 10px #3333ff;
        }
        50% {
          border-color: #00ffcc;
          box-shadow: 0 0 10px #00ffcc;
        }
        75% {
          border-color: #ffcc00;
          box-shadow: 0 0 10px #ffcc00;
        }
        100% {
          border-color: #ff00cc;
          box-shadow: 0 0 10px #ff00cc;
        }
      }

      .flowing-border {
        position: relative;
        border: 2px solid transparent;
        border-radius: 8px;
        animation: borderFlow 3s linear infinite;
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
      }

      @media screen and (min-width: 440px) {
        .box {
          width: 420px;
        }
      }

      @media screen and (min-width: 520px) {
        .box {
          width: 510px;
        }
      }
      @media screen and (min-width: 590px) {
        .box {
          width: 580px;
        }
      }

      @media screen and (min-width: 620px) {
        .box {
          width: 600px;
        }
      }
      @media screen and (min-width: 660px) {
        .box {
          width: 650px;
        }
      }

      @media screen and (min-width: 740px) {
        .box {
          width: 720px;
        }
      }

      @media screen and (min-width: 880px) {
        .box {
          width: 820px;
        }
      }

      @media screen and (min-width: 1040px) {
        .box {
          width: 1010px;
        }
      }

      @media screen and (min-width: 1280px) {
        .box {
          width: 1240px;
        }
      }

      .color-wave {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, #ff00cc, #3333ff, #00ffcc, #ffcc00);
        background-size: 400% 400%;
        z-index: 9998;
        opacity: 0.3;
        mix-blend-mode: overlay;
        animation: gradientWave 2s ease infinite;
        pointer-events: none;
      }

      @keyframes gradientWave {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .quantum-field {
        position: fixed;
        width: 0;
        height: 0;
        transform: translate(-50%, -50%);
        z-index: 9999;
        pointer-events: none;
      }

      .quantum-particle {
        position: absolute;
        width: var(--size);
        height: var(--size);
        background: var(--color);
        border-radius: 50%;
        opacity: 0;
        left: 0;
        top: 0;
        filter: blur(1px);
        animation: quantumFloat 1.5s ease-in-out var(--delay) forwards,
          quantumPulse 0.5s ease-in-out infinite alternate;
      }

      @keyframes quantumFloat {
        0% {
          transform: translate(var(--x), var(--y)) scale(0);
          opacity: 0;
        }
        50% {
          opacity: 0.8;
        }
        100% {
          transform: translate(0, 0) scale(1.5);
          opacity: 0;
        }
      }

      @keyframes quantumPulse {
        from {
          box-shadow: 0 0 2px 0px currentColor;
        }
        to {
          box-shadow: 0 0 8px 2px currentColor;
        }
      }

      .quantum-active .quantum-particle {
        animation: quantumCollapse 1s ease-out forwards,
          quantumPulse 0.3s ease-in-out infinite alternate;
      }

      @keyframes quantumCollapse {
        0% {
          transform: translate(var(--x), var(--y));
          opacity: 0.8;
        }
        100% {
          transform: translate(0, 0);
          opacity: 0;
        }
      }

      .mouse-ripple {
        position: fixed;
        transition: all 1s ease-out;
      }

      /* å›¾ç‰‡æŸ¥çœ‹å™¨æ ·å¼ */
      #image-viewer {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        z-index: 99999;
        display: none;
        justify-content: center;
        align-items: center;
        cursor: zoom-out;
        overflow: hidden;
      }

      #image-container {
        position: relative;
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
      }

      #zoomed-image {
        max-width: 90%;
        max-height: 90%;
        transition: transform 0.3s ease;
        cursor: move;
        position: absolute;
        transform-origin: center center;
      }

      .close-button {
        position: absolute;
        top: 20px;
        right: 20px;
        color: white;
        font-size: 40px;
        cursor: pointer;
        z-index: 100000;
      }

      .zoom-button {
        position: absolute;
        bottom: 20px;
        background-color: rgba(0, 0, 0, 0.5);
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 30px;
        cursor: pointer;
        z-index: 100000;
      }

      .zoom-in {
        right: 20px;
      }

      .zoom-out {
        right: 80px;
      }

      .reset {
        right: 140px;
      }
    </style>
  </head>
  <body>
    <div id="background-wrapper">
      <video id="background-video" preload="auto" autoplay loop muted>
        <source src="./image/bg/1.mp4" type="video/mp4" />
      </video>
    </div>

    <div class="box">
      <div class="menuLeft">
        <div class="headContent">
          <div id="myElement">ğŸ€</div>
        </div>
        <ul id="h3List"></ul>
      </div>
      <div class="box1">
        <div id="output"></div>
      </div>
    </div>

    <div class="bottom">
      <div id="time1"></div>
      <div id="time2"></div>
      <div id="time3"></div>
    </div>
    <!-- æ‰“å¼€æ–‡ä»¶å¼€å§‹ start  -->
    <div class="fileBox">
      <label for="txtFileInput" class="custom-file-input">é€‰æ‹©æ–‡ä»¶</label>
      <input type="file" id="txtFileInput" accept=".txt" />
    </div>
    <!-- æ‰“å¼€æ–‡ä»¶ç»“æŸ end  -->

    <div class="notification">âœ¨ å¤åˆ¶æˆåŠŸ âœ¨</div>
  </body>
</html>


